<htmlform>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}
	</style>

	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>Contact Registry </h2>

	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Date:</td>
				<td><encounterDate default="today" /></td>
			</tr>
			<tr>
				<td>Location:</td>
				<td><encounterLocation default="2"/></td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td><encounterProvider default="currentUser" type="autocomplete"/></td>
			</tr>
		</table>
	</section>

	<section headerLabel="2. Contact Registry Information ">
		<div>
			<p>
				Total Number of Contacts
				<br/>
				<obs conceptId="164087" id="contacts" required="true" size="5"/>
			</p>

            <p>
				Total Number of adult contacts
                <br/>
				<obs conceptId="164088" id="adult_contacts" required="true" size="5"/>
			</p>
			
            <p>
				Total Number of childhood contacts
                <br/>
				<obs conceptId="164089" id="childhood_contacts" required="true" size="5" />
			</p>

<p>
				Does the family agree for investigation of their contacts for PET?
				<br/>
				<obs conceptId="165839" id="contacts" required="true" />
			</p>

		</div>
	</section>

	<submit/>

    <script type="text/javascript">
        var startDate = new Date();
		
		 jQuery(function() {
				var sum=0;
				getField('contacts.value').change(function() {
					if(getValue('contacts.value') &lt; 0 || getValue('contacts.value') &gt; 50){
							getField('contacts.error').html('Value out of range. Value should be between 0-50').show();
					}
					else{
						getField('contacts.error').html('').hide();
					}
					sum = +getValue('adult_contacts.value') + +getValue('childhood_contacts.value');
					setValue('contacts.value',sum);
				});
				getField('adult_contacts.value').change(function() {
					if(getValue('adult_contacts.value') &lt; 0 || getValue('adult_contacts.value') &gt; 25){
							getField('adult_contacts.error').html('Value out of range. Value should be between 0-25').show();
					}
					else{
						getField('adult_contacts.error').html('').hide();
					}
					sum = +getValue('adult_contacts.value') + +getValue('childhood_contacts.value');
					setValue('contacts.value',sum);
				});
				getField('childhood_contacts.value').change(function() {
					if(getValue('childhood_contacts.value') &lt; 0 || getValue('childhood_contacts.value') &gt; 25){
							getField('childhood_contacts.error').html('Value out of range. Value should be between 0-25').show();
					}
					else{
						getField('childhood_contacts.error').html('').hide();
					}
					sum = +getValue('adult_contacts.value') + +getValue('childhood_contacts.value');
					setValue('contacts.value',sum);
				});
					
        });
		beforeSubmit.push(function() {
			myRegExp = new RegExp(/^[0-9]+$/);
            var error=true;
			setValue('contacts.error', '');
            setValue('adult_contacts.error','');
			setValue('childhood_contacts.error','');
			   
            if(getValue('contacts.value') &lt; 0 || getValue('contacts.value') &gt; 50){
				getField('contacts.error').html('Value out of range. Value should be between 0-50').show();
				error=false;
			}
			else{
				getField('contacts.error').html('').hide();
			}
			
			
			
		
			
			if(getValue('adult_contacts.value') &lt; 0 || getValue('adult_contacts.value') &gt; 25){
				getField('adult_contacts.error').html('Value out of range. Value should be between 0-25').show();
				error=false;
			}
			else{
				if(!myRegExp.test(getValue('adult_contacts.value'))) {
				getField('adult_contacts.error').html('Please enter integer values').show();
				error=false;
				}
				else{
					getField('adult_contacts.error').html('').hide();
				}
			}
			if(getValue('childhood_contacts.value') &lt; 0 || getValue('childhood_contacts.value') &gt; 25){
				getField('childhood_contacts.error').html('Value out of range. Value should be between 0-25').show();
				error=false;
			}
			else{
					if(!myRegExp.test(getValue('childhood_contacts.value'))) {
					getField('childhood_contacts.error').html('Please enter integer values').show();
					error=false;
					}
					else{
						getField('childhood_contacts.error').html('').hide();
					}
			}
            if(error==false){
				return false;
            }
            else{
				var endDate = new Date();
                var timeDiff = Math.abs(endDate.getTime() - startDate.getTime());
				var diffSec = timeDiff/1000;
				alert(diffSec + " seconds to fill form");
                return true;
            } 
		});
    </script>


</htmlform>