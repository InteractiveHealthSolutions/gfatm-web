<htmlform>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}
	</style>
	
	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>PET-Socio Economics Data Form (v1.0)</h2>

	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Date:</td>
				<td><encounterDate default="today"/></td>
			</tr>
			<tr>
				<td>Location:</td>
				<td><encounterLocation/></td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td><encounterProvider default="currentUser" type="autocomplete"/></td>
			</tr>
			
		</table>
	</section>

	<section headerLabel="2. Socio Economics Data Form Information ">
		<div>
	            <p>
					What is your ethnicity?
                    <br/>
					<obs conceptId="163153" id="ethnicity" answerConceptIds="163219,163217,163216,163215,163220,164181,164176,164175,164200,164201,164179,163218,164178,164177,164232,164180,1067,164106" defaultValue="163219" required="true">
					<controls>
						<when value="164180" thenDisplay="#other_ethnicity"/>       
					</controls>
					</obs>
				</p>

                <p id="other_ethnicity">
					If other ethnicity, please specify:  <label style="color:red">*</label>
                    <br/>
					<obs conceptId="164180" id="other_ethnicity" maxlength="255"/>

				</p>

		<div id="patient_age_div">
                <p>
					Patient's Highest Level of Education Attainment:
                    <br/>
					<obs conceptId="1712" id="education_level" answerConceptIds="160289,1713,1714,160292,160300,164140,159785,164138,164142,160293,160294,5622,1067,164106" defaultValue="160292" required="true"/>
				</p>

			<div id="marital_status_div">
                <p>
					Marital status: <label style="color:red">*</label>
                    <br/>
					<obs conceptId="1054" id="marital_status" answerConceptIds="1057,164144,5555,1056,1058,1059,5622,1067,164106" />
				</p>
			</div>

                <p>
                    Current employment status:  <label style="color:red">*</label>
                    <br/>
					<obs conceptId="164145" id="employment_status" answerConceptIds="164146,164147,159465,123801,159464,159461,1067,164106" defaultValue="164146">
					<controls>
						<when value="164146" thenDisplay="#employed_div"/>
					</controls>
					</obs>
				</p>

                <p id="employed_div">
                    Patient's Occupation:  <label style="color:red">*</label>
                    <br/>
					<obs conceptId="163399" id="occupation" answerConceptIds="163335,164182,164102,159613,159467,164096,162591,159466,163333,1538,159674,164103,164099,159464,164104,164183,164184,164185,159463,163334,164101,164100,164186,164187,159673,164097,1539,162946,159675,164233,1067,5622"/>
				</p>


                <p>
					Patient's income: 
					<br/>
					<obs conceptId="159776" id="income" required="true"/>
				</p>
						<p>
							Patient's income group:
							<br/>
							<obs conceptId="164174" id="income_class"/>
					   </p>
				</div>

		<p>
			Who is patient's head of household within his/her family?
			<br/>
			<obs conceptId="163354" id="household_head" answerConceptIds="970,971,160723,160724,160726,160725,160729,160730,160727,160728,5617,975,974,5620" required="true">
                    <controls>
                     <when value="5620" thenDisplay="#other_household"/>
                 </controls>
				</obs>

		</p>
		
		
		<p id="other_household"><label style="color:red">*</label>
			If other head of household, please specify
			<br/>
			<obs conceptId="5620" id="other_household_head" maxlength="255"/>
		</p>
		
		
		<p>
			Highest Level of Education Attainment of Head of Household
			<br/>
			<obs conceptId="1712" id="household_head_education" answerConceptIds="160289,1713,1714,160292,160300,164140,159785,164138,164142,160293,160294,5622,1067,164106" required="true">

<controls>
                     <when value="5622" thenDisplay="#other_household_education_div"/>
                 </controls>
				</obs>

		</p>

<p id="other_household_education_div"><label style="color:red">*</label>
			Specify, if other
			<br/>
			<obs conceptId="165720" id="other_household_education" maxlength="255"/>
		</p>
		
		
		<p>
			Mother tongue
			<br/>
			<obs conceptId="164205" id="mother_tongue" answerConceptIds="164202,164203,164204,164206,164207,164208,164209,164210,164211,164212,164213,164214,164215,164216,164217,164218,164219,164220,164221,1067,164106" required="true">
<controls>
                     <when value="164221" thenDisplay="#other_mothertongue"/>
                 </controls>
				</obs>


		</p>
		
		<p id="other_mothertongue"> <label style="color:red">*</label>
			If mother tongue other, then specify:
			<br/>
			<obs conceptId="164221" id="mother_tongue_other" maxlength="50"/>
		</p>
   </div>
	</section>

	<submit/>
    <script type="text/javascript">

jQuery(window).bind("load", function() {
       
        });


	var patientage= <lookup expression="patient.age"/>
     if(patientage &lt;1){
                         $j('#patient_age_div').hide();
          }
                    else{
			 $j('#patient_age_div').show();
           }
		if(patientage &lt;14){
                         $j('#marital_status_div').hide();
          }
                    else{
			 $j('#marital_status_div').show();
           }
		   	   
	var startDate = new Date();
    jQuery(function() {     
		getField('income.value').change(function() {
	        if(getValue('income.value')==0){
                       setValue('income_class.value', 1107);
                
                }
                else if(getValue('income.value') &gt;1 &amp;&amp; getValue('income.value') &lt;7001){
                       setValue('income_class.value', 164169);
                
                }
	        else if(getValue('income.value') &gt;7000 &amp;&amp; getValue('income.value') &lt;35001){
                         setValue('income_class.value', 164170);
                
                }
                else if(getValue('income.value') &gt;35000 &amp;&amp; getValue('income.value') &lt;87001){
                       setValue('income_class.value', 164171);
                
                }
                else if(getValue('income.value') &gt;87000 &amp;&amp; getValue('income.value') &lt;173001){
                       setValue('income_class.value', 164172);
                }
                else if(getValue('income.value') &gt;173000){
                       setValue('income_class.value', 164173);
                }

                else{
                       setValue('income_class.value',1067);
                }
	       
		});
		getField('income_class.value').change(function() {
	        if(getValue('income.value')==0){
                       setValue('income_class.value', 1107);
                
                }
                else if(getValue('income.value') &gt;1 &amp;&amp; getValue('income.value') &lt;7001){
                       setValue('income_class.value', 164169);
                
                }
				else if(getValue('income.value') &gt;7000 &amp;&amp; getValue('income.value') &lt;35001){
                         setValue('income_class.value', 164170);
                
                }
                else if(getValue('income.value') &gt;35000 &amp;&amp; getValue('income.value') &lt;87001){
                       setValue('income_class.value', 164171);
                
                }
                else if(getValue('income.value') &gt;87000 &amp;&amp; getValue('income.value') &lt;173001){
                       setValue('income_class.value', 164172);
                }
                else if(getValue('income.value') &gt;173000){
                       setValue('income_class.value', 164173);
                }

                else{
                       setValue('income_class.value',1067);
                }
	       
		});
	});
    beforeSubmit.push(function() {
        var error1=true,error2=true,error3=true,error4=true,error5=true,error6=true,error7=true,error8=true,error9=true,error10=true;
        setValue('mother_tongue_other.error', '');
        setValue('other_household_head.error','');
		setValue('other_ethnicity.error','');
        setValue('occupation.error','');
		setValue('education_level.error','');
		setValue('marital_status.error','');
		setValue('employment_status.error','');
		setValue('income.error','');

if(getValue('household_head_education.value')==5622 &amp;&amp; getValue('other_household_education.value')==''){
			getField('other_household_education.error').html('Please specify Education level of household head').show();
			error10=false;
		}
        else{
            getField('other_household_education.error').html('').hide();
            error10=true;
        }

		if(getValue('mother_tongue.value')==164221 &amp;&amp; getValue('mother_tongue_other.value')==''){
			getField('mother_tongue_other.error').html('Please specify Other mother tongue').show();
			error1=false;
		}
        else{
            getField('mother_tongue_other.error').html('').hide();
            error1=true;
        }
        if(getValue('household_head.value')==5620 &amp;&amp; getValue('other_household_head.value')==''){
            getField('other_household_head.error').html('Please specify Other household head').show();
            error2=false;
        }
        else{
            getField('other_household_head.error').html('').hide();
            error2=true;
        }
        if(getValue('ethnicity.value')==164180&amp;&amp; getValue('other_ethnicity.value')==''){
            getField('other_ethnicity.error').html('Please specify Other ethnicity').show();
            error3=false;
        }
        else{
            getField('other_ethnicity.error').html('').hide();
            error3=true;
        }
		if(getValue('employment_status.value')==164146&amp;&amp; patientage &gt;1 &amp;&amp; getValue('occupation.value')=='' ){
            getField('occupation.error').html('Please specify Patient Occupation').show();
            error4=false;
        }
        else{
            getField('occupation.error').html('').hide();
            error4=true;
        }
		if(patientage &gt;1 &amp;&amp; getValue('education_level.value')=='' ){
            getField('education_level.error').html('Please specify Education Level').show();
            error5=false;
        }
        else{
            getField('education_level.error').html('').hide();
            error5=true;
        }
		if(patientage &gt;14 &amp;&amp; getValue('marital_status.value')=='' ){
            getField('marital_status.error').html('Please specify Martial Status').show();
            error6=false;
        }
        else{
            getField('marital_status.error').html('').hide();
            error6=true;
        }
		if(patientage &gt;1 &amp;&amp; getValue('employment_status.value')=='' ){
            getField('employment_status.error').html('Please specify Employement Status').show();
            error7=false;
        }
        else{
            getField('employment_status.error').html('').hide();
            error7=true;
        }
		if(patientage &gt;1 &amp;&amp; getValue('income.value')=='' ){
            getField('income.error').html('Please specify income').show();
            error8=false;
        }
        else{
            getField('income.error').html('').hide();
            error8=true;
        }
		

		if(error1==false || error2==false || error3==false || error4==false || error5==false || error6==false || error7==false || error8==false || error10 == false){
			return false;
		}
		else{
			var endDate = new Date();
			var timeDiff = Math.abs(endDate.getTime() - startDate.getTime());
			var diffSec = timeDiff/1000;
			alert(diffSec + " seconds to fill form");
			return true;
		}
           
});
       
    </script>

</htmlform>