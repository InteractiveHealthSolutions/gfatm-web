<htmlform>
	<!-- Autogenerated example form  (template from 01-Nov-2010 -->
	<macros>
		paperFormId = (Fill this in)
		headerColor =#009d8e
		fontOnHeaderColor = white
	</macros>

	<style>
		.section {
			border: 1px solid $headerColor;
			padding: 2px;
			text-align: left;
			margin-bottom: 1em;
		}
		.sectionHeader {
			background-color: $headerColor;
			color: $fontOnHeaderColor;
			display: block;
			padding: 2px;
			font-weight: bold;
		}
		table.baseline-aligned td {
			vertical-align: baseline;
		}

	</style>

	<span style="float:right">Paper Form ID: $paperFormId</span>
	<h2>PET-Baseline Counselling Form (v1.0)</h2>

	<section headerLabel="1. Encounter Details">
		<table class="baseline-aligned">
			<tr>
				<td>Date:</td>
				<td><encounterDate default="today"/></td>
			</tr>
			<tr>
				<td>Location:</td>
				<td><encounterLocation/></td>
			</tr>
			<tr>
				<td>Provider:</td>
				<td><encounterProvider default="currentUser" type="autocomplete"/></td>
			</tr>
		</table>
	</section>

	<section headerLabel="2. Baseline Counselling Information ">
		<div>
	   		<p>
			Family Structure
			<br/>
			<obs conceptId="164254" id="family_structure" answerConceptIds="164252,164253" defaultValue="164253" required="true"/>
		</p>
		
		
		<p>
			Number of members
			<br/>
			<obs conceptId="164255" id="family_size" required="true" maxlength="2" />
		</p>
		
		<p>
			Earning members
			<br/>
			<obs conceptId="164256" id="earning_members" required="true"/>
		</p>

		<p>
			Monthly household income
			<br/>
			<obs conceptId="159776" id="income" required="true"  maxlength="9"/>
		</p>
		
		<p>
			Household income group
			<br/>
			<obs conceptId="164174" id="income_class" required="true"/>
		</p>
		
		<p>
			Status of house (type of residence)
			<br/>
			<obs conceptId="164260" id="residence_type" required="true" answerConceptIds="164258,164259,1067"/>
		</p>
		
		<p>
			Number of rooms	
			<br/>
			<obs conceptId="1475" id="rooms_house" />
		</p>

		<p>
			Contact's psychiatric and general medical condition	 <label style="color:red">*</label> <label  id="medical_contact_error" style="color:red"></label>

			<br/>
				<obsgroup groupingConceptId="164261">
					<obs conceptId="164261" answerConceptId="155" style="checkbox"  id="cb_medical_contact_1"/>
					<br/>
					<obs conceptId="164261" answerConceptId="115809" style="checkbox" id="cb_medical_contact_2"/>
					<br/>
					<obs conceptId="164261" answerConceptId="162558" style="checkbox" id="cb_medical_contact_3"/>
					<br/>	
					<obs conceptId="164261" answerConceptId="884" style="checkbox" id="cb_medical_contact_4"/>
					<br/>
					<obs conceptId="164261" answerConceptId="156590" style="checkbox" id="cb_medical_contact_5"/>
					<br/>
					<obs conceptId="164261" answerConceptId="119481" style="checkbox" id="cb_medical_contact_6"/>
					<br/>					
					<obs conceptId="164261" answerConceptId="1107" style="checkbox" id="cb_medical_contact_7"/>
					<br/>
					<obs conceptId="164261" answerConceptId="164235" style="checkbox" id="cb_medical_contact_other"/>				
				</obsgroup>
		</p>
		<p id="other_medical_contact">
			Others	
			<br/>
			<obs conceptId="164235" id="other_contact_medical" maxlength="100"/> <label style="color:red">*</label>
		</p>
   </div>
	</section>
<section headerLabel="3. Counselling Procedure">
		<div>

		<p>
			Baseline counselling provided to <label style="color:red">*</label> <label  id="relation_error" style="color:red"></label>
			<br/>
				<obsgroup groupingConceptId="164262">   
					<obs conceptId="164262" answerConceptId="978" style="checkbox" id="cb_relation_15"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160639" style="checkbox" id="cb_relation_1"/>
					<br/>
					<obs conceptId="164262" answerConceptId="970" style="checkbox" id="cb_relation_2"/>
					<br/>	
					<obs conceptId="164262" answerConceptId="971" style="checkbox" id="cb_relation_3"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160723" style="checkbox" id="cb_relation_4"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160724" style="checkbox" id="cb_relation_5"/>
					<br/>					
					<obs conceptId="164262" answerConceptId="160726" style="checkbox" id="cb_relation_6"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160725" style="checkbox" id="cb_relation_7"/>		
					<br/>
					<obs conceptId="164262" answerConceptId="160729" style="checkbox" id="cb_relation_8"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160730" style="checkbox" id="cb_relation_9"/>
					<br/>
					<obs conceptId="164262" answerConceptId="160727" style="checkbox" id="cb_relation_10"/>
					<br/>	
					<obs conceptId="164262" answerConceptId="160728" style="checkbox" id="cb_relation_11"/>
					<br/>
					<obs conceptId="164262" answerConceptId="5617" style="checkbox" id="cb_relation_12"/>
					<br/>
					<obs conceptId="164262" answerConceptId="975" style="checkbox" id="cb_relation_13"/>
					<br/>
					<obs conceptId="164262" answerConceptId="974" style="checkbox" id="cb_relation_14"/>
					<br/>					
					<obs conceptId="164262" answerConceptId="5620" style="checkbox" id="other"/>
					<br/>
					
				</obsgroup>
		</p>
		
		<p id="other-relation"> 
			Others
		             <br/>
				<obs conceptId="5620" id="other_relation" maxlength="50"/> <label style="color:red">*</label>
		</p>
		
		<p>
			Procedure
			<br/>
			<obs conceptId="164263" id="counseling_procedure" required="true">
				<controls>
                    <when value="1065" thenDisplay="#counseling_procedure_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_procedure_explain_div">
			Explanation
			<br/>
			<obs conceptId="164264" id="counseling_procedure_explain" size="55" maxlength="1000"/>
		</p>
		
		<p>
			Purpose
			<br/>
			<obs conceptId="164265" id="counseling_purpose" required="true">
			    <controls>
                    <when value="1065" thenDisplay="#counseling_purpose_explain_div"/>       
				</controls>
			</obs>
		</p>
		
		<p id="counseling_purpose_explain_div">
			Explanation
			<br/>
			<obs conceptId="164266" id="counseling_purpose_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Duration of PET
			<br/>
			<obs conceptId="164267" id="counseling_duration" required="true">
			    <controls>
                    <when value="1065" thenDisplay="#counseling_duration_explain_div"/>       
				</controls>
			</obs>
		</p>
		
		<p id="counseling_duration_explain_div">
			Explanation
			<br/>
			<obs conceptId="164268" id="counseling_duration_explain"  size="55"  maxlength="1000"/>
		</p>
		<p>
			Infection control measures
			<br/>
			<obs conceptId="164269" id="counseling_prevention" required="true" >
				<controls>
                    <when value="1065" thenDisplay="#counseling_prevention_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_prevention_explain_div">
			Explanation
			<br/>
			<obs conceptId="164270" id="counseling_prevention_explain"  size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Transmission
			<br/>
			<obs conceptId="164271" id="counseling_transmission" required="true" >
			    <controls>
                    <when value="1065" thenDisplay="#counseling_transmission_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_transmission_explain_div">
			Explanation
			<br/>
			<obs conceptId="164272" id="counseling_transmission_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Adherence
			<br/>
			<obs conceptId="164273" id="counseling_adherence" required="true" >
				<controls>
                    <when value="1065" thenDisplay="#counseling_adherence_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_adherence_explain_div">
			Explanation
			<br/>
			<obs conceptId="164274" id="counseling_adherence_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Nutrition
			<br/>
			<obs conceptId="1380" id="counseling_nutrition" answerConceptIds="1066,1065" required="true" >
			<controls>
                    <when value="1065" thenDisplay="#counseling_nutrition_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_nutrition_explain_div">
			Explanation
			<br/>
			<obs conceptId="164275" id="counseling_nutrition_explain" size="55"  maxlength="1000" />
		</p>
		
		<p>
			Common adverse effects
			<br/>
			<obs conceptId="164276" id="counseling_ae" required="true" >
			<controls>
                    <when value="1065" thenDisplay="#counseling_ae_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_ae_explain_div">
			Explanation
			<br/>
			<obs conceptId="164277" id="counseling_ae_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Misconception
			<br/>
			<obs conceptId="164278" id="counseling_misconception" required="true" >
			<controls>
                    <when value="1065" thenDisplay="#counseling_misconception_explain_div"/>       
				</controls>
			</obs>
		</p>

		<p id="counseling_misconception_explain_div">
			Explanation
			<br/>
			<obs conceptId="164279" id="counseling_misconception_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Follow-up
			<br/>
			<obs conceptId="164280" id="counseling_followup" required="true" >
			<controls>
                    <when value="1065" thenDisplay="#counseling_followup_explain_div"/>       
				</controls>
			</obs>
		</p>
		
		<p id="counseling_followup_explain_div">
			Explanation
			<br/>
			<obs conceptId="164281" id="counseling_followup_explain" size="55"  maxlength="1000"/>
		</p>
		
		<p>
			Questions by contact
			<br/>
			<obs conceptId="164282" id="contact_questions" required="true"  maxlength="1000"/>
		</p>
		
		<p>
			Answers by psychologist
			<br/>
			<obs conceptId="164283" id="psychologist_answers" required="true"  maxlength="1000"/>
		</p>
		
		<p>
			Behaviour of contact
			<br/>
			<obs conceptId="164291" id="behaviour" answerConceptIds="6023,164292,116631,121748,164284,164286,165558,164287,164288,164289,164290" answerLabels="Irritable,Stubborn,Shy/Introvert,Aggressive,Argumentative,Non Compliant,Compliant,Responsible,Co-operative,Non-Cooperative,Others" required="true">
                 <controls>
                     <when value="164290" thenDisplay="#other_behvaior"/>
                 </controls>
				</obs>
		</p>
		
		<p id="other_behvaior">
			Others
			<br/>
			<obs conceptId="164290" id="other_behaviour"  maxlength="70"/>
		</p>
		
		<p>
			Comments by contact/caretaker
			<br/>
			<obs conceptId="164293" id="patient_comments"  maxlength="1000"/>
		</p>
			
		<p>
			Comments by psychologist
			<br/>
			<obs conceptId="164237" id="doctor_notes" required="true"  maxlength="1000"/>
		</p>

</div>
	</section>
	<submit/>
    <script type="text/javascript">
var startDate = new Date();

 jQuery(window).bind("load", function() {
 

  if(getValue('cb_medical_contact_other.value')==164235)
    $j("#other_medical_contact").show();
else
	$j("#other_medical_contact").hide();
	
	if(getValue('other.value')==5620)
    $j("#other-relation").show();
else
	$j("#other-relation").hide();
		
 });


 jQuery(function() {
 
 getField('cb_medical_contact_other.value').change(function() {
  if(getValue('cb_medical_contact_other.value')==164235)
    $j("#other_medical_contact").show();
else
	$j("#other_medical_contact").hide();
 
 });
 
 getField('other.value').change(function() {
  if(getValue('other.value')==5620)
    $j("#other-relation").show();
else
	$j("#other-relation").hide();
 
 });
 
 
		getField('income.value').change(function() {
             
	        if(getValue('income.value')==0){
                       setValue('income_class.value', 1107);
                
                }
                else if(getValue('income.value') &gt;1 &amp;&amp; getValue('income.value') &lt;7001){
                       setValue('income_class.value', 164169);
                }
	        else if(getValue('income.value') &gt;7000 &amp;&amp; getValue('income.value') &lt;35001){
                         setValue('income_class.value', 164170);
                }
                else if(getValue('income.value') &gt;35000 &amp;&amp; getValue('income.value') &lt;87001){
                       setValue('income_class.value', 164171);
                }
                else if(getValue('income.value') &gt;87000 &amp;&amp; getValue('income.value') &lt;173001){
                       setValue('income_class.value', 164172);
                }
                else if(getValue('income.value') &gt;173000){
                       setValue('income_class.value', 164173);
                }

                else{
                       setValue('income_class.value',1067);
                }
	       
	});
getField('income_class.value').change(function() {
             
	        if(getValue('income.value')==0){
                       setValue('income_class.value', 1107);
                
                }
                else if(getValue('income.value') &gt;1 &amp;&amp; getValue('income.value') &lt;7001){
                       setValue('income_class.value', 164169);
                }
	        else if(getValue('income.value') &gt;7000 &amp;&amp; getValue('income.value') &lt;35001){
                         setValue('income_class.value', 164170);
                }
                else if(getValue('income.value') &gt;35000 &amp;&amp; getValue('income.value') &lt;87001){
                       setValue('income_class.value', 164171);
                }
                else if(getValue('income.value') &gt;87000 &amp;&amp; getValue('income.value') &lt;173001){
                       setValue('income_class.value', 164172);
                }
                else if(getValue('income.value') &gt;173000){
                       setValue('income_class.value', 164173);
                }

                else{
                       setValue('income_class.value',1067);
                }
	       
	});
});

 beforeSubmit.push(function() {
                var error1=true,error2=true,error3=true,error4=true,error5=true, error6=true, error=true;
                setValue('family_size.error', '');
                setValue('earning_members.error','');
                setValue('rooms_house.error','');	
				setValue('income.error','');
				
				var val = getValue('other.value');
var val1 = getValue('cb_relation_1.value');
var val2 = getValue('cb_relation_2.value');
var val3 = getValue('cb_relation_3.value');
var val4 = getValue('cb_relation_4.value');
var val5 = getValue('cb_relation_5.value');
var val6 = getValue('cb_relation_6.value');
var val7 = getValue('cb_relation_7.value');
var val8 = getValue('cb_relation_8.value');
var val9 = getValue('cb_relation_9.value');
var val10 = getValue('cb_relation_10.value');
var val11 = getValue('cb_relation_11.value');
var val12 = getValue('cb_relation_12.value');
var val13 = getValue('cb_relation_13.value');
var val14 = getValue('cb_relation_14.value');
var val15 = getValue('cb_relation_15.value');

if(val == null &amp;&amp; val1 == null &amp;&amp; val2 == null &amp;&amp; val3 == null &amp;&amp; val4 == null &amp;&amp; val5 == null &amp;&amp; val6 == null &amp;&amp; val7 == null &amp;&amp; val8 == null &amp;&amp; val9 == null &amp;&amp; val10 == null &amp;&amp; val11== null &amp;&amp; val12 == null &amp;&amp; val13 == null &amp;&amp; val14 == null &amp;&amp; val15 == null){
					document.getElementById('relation_error').innerHTML = 'Required Field';
					error6=false;
				}else{
				    document.getElementById('relation_error').innerHTML = '';
				}

				
				var val = getValue('cb_medical_contact_other.value');
				var val1 = getValue('cb_medical_contact_1.value');
				var val2 = getValue('cb_medical_contact_2.value');
				var val3 = getValue('cb_medical_contact_3.value');
				var val4 = getValue('cb_medical_contact_4.value');
				var val5 = getValue('cb_medical_contact_5.value');
				var val6 = getValue('cb_medical_contact_6.value');
				var val7 = getValue('cb_medical_contact_7.value');
				
				if(val == null &amp;&amp; val1 == null &amp;&amp; val2 == null &amp;&amp; val3 == null &amp;&amp; val4 == null &amp;&amp; val5 == null &amp;&amp; val6 == null &amp;&amp; val7 == null){
					document.getElementById('medical_contact_error').innerHTML = 'Required Field';
					error6=false;
				}else{
				    document.getElementById('medical_contact_error').innerHTML = '';
				}
				
				if(getValue('cb_medical_contact_other.value') == 164235 &amp;&amp; getValue('other_contact_medical.value')==''){
				           getField('other_contact_medical.error').html('Required field').show();
                           error6=false;
				}else {
				  getField('other_contact_medical.error').html('').hide();
				}
				
			
                if(getValue('family_size.value') &lt;0 || getValue('family_size.value') &gt; 50){
                      getField('family_size.error').html('Out of range. Please enter between 0-50').show();
                           error1=false;
                 }
                else{
                          var val = getValue('family_size.value') ;
                          if((parseFloat(val) == parseInt(val)) &amp;&amp; !isNaN(val)){
			  getField('family_size.error').html('').hide();
			  error1=true;
			} else {
			  getField('family_size.error').html('Not an Integer').show();
			  error1=false;
			}
                 }
                 if(getValue('earning_members.value') &lt;0 || getValue('earning_members.value') &gt; 15){
                      getField('earning_members.error').html('Out of range. Please enter between 0-15').show();
                           error2=false;
                 }
                else{
                           var val = getValue('earning_members.value') ;
                          if((parseFloat(val) == parseInt(val)) &amp;&amp; !isNaN(val)){
			  if(getValue('earning_members.value')&gt;getValue('family_size.value')){
                      getField('earning_members.error').html('Earning members can not be greater than family size').show();
                           error2=false;
                 }
                else{
                          getField('earning_members.error').html('').hide();
                           error2=true;
                 }
			} else {
			  

			  getField('earning_members.error').html('Not an Integer').show();
			  error1=false;


			}
                 }
				if(getValue('rooms_house.value') &lt;0 || getValue('rooms_house.value') &gt; 99){
                      getField('rooms_house.error').html('Out of range. Please enter two digits number.').show();
                           error3=false;
                 }
                else{
                           var val = getValue('rooms_house.value') ;
                          if((parseFloat(val) == parseInt(val)) &amp;&amp; !isNaN(val)){
			  getField('rooms_house.error').html('').hide();
			  error3=true;
			} else {
			  getField('rooms_house.error').html('Not an Integer').show();
			  error3=false;
			}
                 }
				 
				 if(getValue('income.value') &lt;0 || getValue('income.value') &gt; 999999999){
                      getField('income.error').html('Out of range. Please enter 9 digits number.').show();
                           error5=false;
                 }
                else{
                          getField('income.error').html('').hide();
                           error5=true;
                 }
				 
                if(error1== false || error2==false || error3==false || error4==false || error5==false || error6==false){
					return false;
				}
				else{
					var endDate = new Date();
					var timeDiff = Math.abs(endDate.getTime() - startDate.getTime());
					var diffSec = timeDiff/1000;
				
					alert(diffSec + " seconds to fill form");
					return true;
				}
});
    </script>

</htmlform>